// Malware Analysis Introduction - What is malware and why analyze it?

import React, { useState } from 'react';
import { motion } from 'framer-motion';
import { BugAntIcon, CheckCircleIcon, XCircleIcon } from '@heroicons/react/24/outline';

const IntroSection: React.FC = () => {
  const [quizAnswer, setQuizAnswer] = useState('');
  const [quizSubmitted, setQuizSubmitted] = useState(false);
  const [malwareTypeQuiz, setMalwareTypeQuiz] = useState<Record<string, string>>({});
  const [typeQuizSubmitted, setTypeQuizSubmitted] = useState(false);

  const checkQuiz = () => setQuizSubmitted(true);
  const quizCorrect = quizAnswer === 'b';

  const checkTypeQuiz = () => setTypeQuizSubmitted(true);

  const malwareTypes = [
    { name: 'Virus', description: 'Replicates by attaching to files', answer: 'replicates' },
    { name: 'Trojan', description: 'Disguises as legitimate software', answer: 'disguises' },
    { name: 'Ransomware', description: 'Encrypts files and demands payment', answer: 'encrypts' },
    { name: 'Spyware', description: 'Secretly monitors user activity', answer: 'monitors' }
  ];

  const allCorrect = malwareTypes.every(type => 
    malwareTypeQuiz[type.name] === type.answer
  );

  return (
    <div className="space-y-6">
      <div className="bg-atom-bg bg-opacity-50 rounded-lg p-6 border-l-4 border-atom-orange">
        <h3 className="text-2xl font-bold text-atom-orange mb-4 flex items-center">
          <BugAntIcon className="h-8 w-8 mr-3" />
          What is Malware Analysis?
        </h3>
        <p className="text-lg text-atom-fg-muted mb-4">
          Malware analysis is like being a disease detective for computers! When a suspicious program 
          appears, analysts study it to understand what it does, how it spreads, and most importantly—how 
          to stop it. This skill is crucial for protecting networks, responding to incidents, and 
          developing security defenses.
        </p>
        <div className="bg-blue-900 bg-opacity-20 p-4 rounded border border-blue-500 border-opacity-30">
          <p className="text-blue-300 text-sm">
            <strong>💡 Fun Fact:</strong> The first computer virus, "Creeper," was created in 1971 
            as an experiment. It displayed the message "I'm the creeper: catch me if you can!"
          </p>
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        <div className="bg-red-900 bg-opacity-20 rounded-lg p-6 border border-red-500 border-opacity-30">
          <h4 className="text-red-400 font-bold text-xl mb-3">🦠 Common Malware Types</h4>
          <ul className="space-y-3 text-red-300 text-sm">
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>🐛 Virus:</strong> Attaches to files and replicates when the file is executed
            </li>
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>🌐 Worm:</strong> Self-replicates across networks without user interaction
            </li>
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>🐴 Trojan:</strong> Masquerades as legitimate software to trick users
            </li>
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>🔒 Ransomware:</strong> Encrypts data and demands payment for decryption
            </li>
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>👁️ Spyware:</strong> Secretly monitors and steals sensitive information
            </li>
            <li className="p-2 bg-red-900 bg-opacity-20 rounded">
              <strong>🤖 Botnet:</strong> Network of compromised computers controlled remotely
            </li>
          </ul>
        </div>

        <div className="bg-green-900 bg-opacity-20 rounded-lg p-6 border border-green-500 border-opacity-30">
          <h4 className="text-green-400 font-bold text-xl mb-3">🔍 Analysis Approaches</h4>
          <ul className="space-y-3 text-green-300 text-sm">
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>📊 Static Analysis:</strong> Examine code without running it (safer but limited)
            </li>
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>▶️ Dynamic Analysis:</strong> Run in sandbox and observe behavior (riskier but thorough)
            </li>
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>🔬 Behavioral Analysis:</strong> Study actions, file changes, network activity
            </li>
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>🧬 Code Analysis:</strong> Reverse engineer to understand algorithms
            </li>
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>📡 Network Analysis:</strong> Monitor communications and data exfiltration
            </li>
            <li className="p-2 bg-green-900 bg-opacity-20 rounded">
              <strong>💾 Memory Analysis:</strong> Inspect runtime memory for hidden payloads
            </li>
          </ul>
        </div>
      </div>

      <div className="bg-atom-bg bg-opacity-50 rounded-lg p-6 border border-atom-purple border-opacity-30">
        <h4 className="text-atom-purple font-bold text-xl mb-4">🎮 Interactive: Match the Malware Type</h4>
        <p className="text-atom-fg-muted mb-4">
          Match each malware type to its primary characteristic:
        </p>
        
        <div className="space-y-3">
          {malwareTypes.map(type => (
            <div key={type.name} className="bg-atom-bg bg-opacity-50 p-4 rounded">
              <p className="text-atom-fg font-bold mb-2">{type.name}: {type.description}</p>
              <div className="flex gap-2 flex-wrap">
                {['replicates', 'disguises', 'encrypts', 'monitors'].map(option => (
                  <label key={option} className={`px-3 py-1 rounded cursor-pointer transition-colors ${
                    malwareTypeQuiz[type.name] === option 
                      ? 'bg-atom-purple text-white' 
                      : 'bg-atom-bg text-atom-fg hover:bg-opacity-70'
                  }`}>
                    <input
                      type="radio"
                      name={type.name}
                      value={option}
                      checked={malwareTypeQuiz[type.name] === option}
                      onChange={(e) => setMalwareTypeQuiz({...malwareTypeQuiz, [type.name]: e.target.value})}
                      className="sr-only"
                    />
                    {option}
                  </label>
                ))}
              </div>
            </div>
          ))}
        </div>

        <button
          onClick={checkTypeQuiz}
          disabled={Object.keys(malwareTypeQuiz).length < 4}
          className="mt-4 px-6 py-2 bg-atom-purple text-white rounded hover:bg-opacity-80 transition-colors disabled:opacity-50"
        >
          Check Answers
        </button>

        {typeQuizSubmitted && (
          <motion.div
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            className={`mt-4 p-4 rounded ${allCorrect ? 'bg-green-900 bg-opacity-20 border border-green-500' : 'bg-yellow-900 bg-opacity-20 border border-yellow-500'}`}
          >
            {allCorrect ? (
              <div className="text-green-400">
                <CheckCircleIcon className="h-6 w-6 inline mr-2" />
                <span className="font-bold">Perfect! 🎉</span>
                <p className="text-sm mt-1">You correctly matched all malware types to their characteristics!</p>
              </div>
            ) : (
              <div className="text-yellow-300">
                <span className="font-bold">Almost there!</span>
                <p className="text-sm mt-1">
                  Correct answers: Virus→replicates, Trojan→disguises, Ransomware→encrypts, Spyware→monitors
                </p>
              </div>
            )}
          </motion.div>
        )}
      </div>

      <div className="bg-yellow-900 bg-opacity-20 rounded-lg p-6 border border-yellow-500 border-opacity-30">
        <h4 className="text-yellow-400 font-bold text-xl mb-3">⚠️ Critical Safety Rules</h4>
        <p className="text-yellow-300 mb-3">
          <strong>NEVER analyze real malware without proper training and tools!</strong>
        </p>
        <ul className="text-yellow-300 text-sm space-y-2">
          <li>✓ <strong>Always use isolated VMs:</strong> Never on your host machine</li>
          <li>✓ <strong>Disconnect networks:</strong> Prevent malware from spreading or calling home</li>
          <li>✓ <strong>Use professional sandboxes:</strong> Cuckoo, Any.run, Joe Sandbox</li>
          <li>✓ <strong>Take snapshots:</strong> Restore to clean state after each analysis</li>
          <li>✓ <strong>Follow legal guidelines:</strong> Only analyze with proper authorization</li>
        </ul>
      </div>

      <div className="bg-atom-bg bg-opacity-50 rounded-lg p-6 border border-atom-blue border-opacity-30">
        <h4 className="text-atom-blue font-bold text-xl mb-4">📝 Knowledge Check</h4>
        <p className="text-atom-fg-muted mb-4">
          Why is malware analysis important for cybersecurity professionals?
        </p>
        <div className="space-y-3">
          {[
            { value: 'a', text: 'To create more powerful malware' },
            { value: 'b', text: 'To understand threats, develop defenses, and respond to incidents' },
            { value: 'c', text: 'To delete all viruses automatically' },
            { value: 'd', text: 'To hack into other systems' }
          ].map(option => (
            <label key={option.value} className="flex items-center space-x-3 p-3 bg-atom-bg rounded hover:bg-opacity-70 cursor-pointer">
              <input
                type="radio"
                name="quiz1"
                value={option.value}
                checked={quizAnswer === option.value}
                onChange={(e) => setQuizAnswer(e.target.value)}
                className="text-atom-blue w-4 h-4"
              />
              <span className="text-atom-fg">{option.value.toUpperCase()}) {option.text}</span>
            </label>
          ))}
        </div>
        <button
          onClick={checkQuiz}
          disabled={!quizAnswer}
          className="mt-4 px-6 py-2 bg-atom-blue text-white rounded hover:bg-opacity-80 transition-colors disabled:opacity-50"
        >
          Submit Answer
        </button>
        {quizSubmitted && (
          <motion.div 
            initial={{ opacity: 0, y: -10 }}
            animate={{ opacity: 1, y: 0 }}
            className={`mt-4 p-4 rounded ${quizCorrect ? 'bg-green-900 bg-opacity-20 border border-green-500' : 'bg-red-900 bg-opacity-20 border border-red-500'}`}
          >
            {quizCorrect ? (
              <div className="text-green-400">
                <CheckCircleIcon className="h-6 w-6 inline mr-2" />
                <span className="font-bold">Correct! 🎉</span>
                <p className="text-sm mt-1">
                  Malware analysis helps us understand how threats work, develop better defenses, 
                  and respond effectively to security incidents!
                </p>
              </div>
            ) : (
              <div className="text-red-400">
                <XCircleIcon className="h-6 w-6 inline mr-2" />
                <span className="font-bold">Not quite!</span>
                <p className="text-sm mt-1">The answer is B. We analyze malware to defend against it, not to create harm.</p>
              </div>
            )}
          </motion.div>
        )}
      </div>

      <div className="bg-blue-900 bg-opacity-20 rounded-lg p-6 border border-blue-500 border-opacity-30">
        <h4 className="text-blue-400 font-bold text-xl mb-3">🚀 Career Opportunities</h4>
        <p className="text-blue-300 mb-3">
          Malware analysts are in high demand across many sectors:
        </p>
        <div className="grid md:grid-cols-2 gap-3 text-blue-300 text-sm">
          <div>• Security Operations Centers (SOC)</div>
          <div>• Incident Response Teams</div>
          <div>• Threat Intelligence Firms</div>
          <div>• Antivirus/EDR Companies</div>
          <div>• Government Agencies (NSA, FBI, DHS)</div>
          <div>• Financial Security Teams</div>
        </div>
      </div>
    </div>
  );
};

export default IntroSection;
